/* Additional Psychedelic Effects */

/* Intense Fractal Background Animation */
@keyframes fractalPulse {
    0%, 100% {
        filter: hue-rotate(0deg) brightness(1) saturate(1.2);
    }
    25% {
        filter: hue-rotate(90deg) brightness(1.3) saturate(1.5);
    }
    50% {
        filter: hue-rotate(180deg) brightness(0.8) saturate(1.8);
    }
    75% {
        filter: hue-rotate(270deg) brightness(1.3) saturate(1.5);
    }
}

#game-canvas-container {
    animation: fractalPulse 15s infinite;
}

/* Kaleidoscope Effect */
@keyframes kaleidoscope {
    0%, 100% {
        filter: hue-rotate(0deg) contrast(1.1);
    }
    50% {
        filter: hue-rotate(180deg) contrast(1.3);
    }
}

body {
    animation: kaleidoscope 10s infinite ease-in-out;
}

/* Glowing Text Effects */
@keyframes textGlow {
    0%, 100% {
        text-shadow: 
            0 0 10px currentColor,
            0 0 20px currentColor,
            0 0 30px currentColor;
    }
    50% {
        text-shadow: 
            0 0 20px currentColor,
            0 0 40px currentColor,
            0 0 60px currentColor,
            0 0 80px currentColor;
    }
}

.power-name {
    animation: textGlow 2s infinite;
}

/* Kaleidoscope Cursor */
body {
    cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32"><circle cx="16" cy="16" r="8" fill="%23ff00ff" opacity="0.5"/><circle cx="16" cy="16" r="4" fill="%2300ffff"/></svg>') 16 16, auto;
}

/* Trippy Border Animation */
@keyframes borderFlow {
    0% {
        border-image-source: linear-gradient(45deg, #ff00ff, #00ffff, #ff00ff);
    }
    50% {
        border-image-source: linear-gradient(45deg, #00ffff, #ff00ff, #00ffff);
    }
    100% {
        border-image-source: linear-gradient(45deg, #ff00ff, #00ffff, #ff00ff);
    }
}

.power-slot {
    animation: borderFlow 3s infinite;
}

/* Breathing Effect for HUD */
@keyframes breathe {
    0%, 100% {
        transform: scale(1);
        opacity: 0.9;
    }
    50% {
        transform: scale(1.02);
        opacity: 1;
    }
}

.meter-bar {
    animation: breathe 4s ease-in-out infinite;
}

/* Enhanced Psychedelic Grid Background */
#game-container::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
        linear-gradient(0deg, transparent 24%, rgba(255, 0, 255, .1) 25%, rgba(255, 0, 255, .1) 26%, transparent 27%, transparent 74%, rgba(255, 0, 255, .1) 75%, rgba(255, 0, 255, .1) 76%, transparent 77%, transparent),
        linear-gradient(90deg, transparent 24%, rgba(0, 255, 255, .1) 25%, rgba(0, 255, 255, .1) 26%, transparent 27%, transparent 74%, rgba(0, 255, 255, .1) 75%, rgba(0, 255, 255, .1) 76%, transparent 77%, transparent);
    background-size: 50px 50px;
    pointer-events: none;
    animation: gridScroll 15s linear infinite, gridPulse 3s ease-in-out infinite;
    z-index: 1;
}

@keyframes gridScroll {
    0% {
        background-position: 0 0;
    }
    100% {
        background-position: 50px 50px;
    }
}

@keyframes gridPulse {
    0%, 100% {
        opacity: 0.5;
        background-size: 50px 50px;
    }
    50% {
        opacity: 1;
        background-size: 55px 55px;
    }
}

/* Rainbow Bar Animation */
@keyframes rainbowBar {
    0% {
        filter: hue-rotate(0deg);
    }
    100% {
        filter: hue-rotate(360deg);
    }
}

#enlightenment-bar {
    animation: rainbowBar 10s linear infinite;
}

/* Floating Animation for Dialogue */
@keyframes float {
    0%, 100% {
        transform: translateX(-50%) translateY(0px);
    }
    50% {
        transform: translateX(-50%) translateY(-10px);
    }
}

#dialogue-box {
    animation: float 3s ease-in-out infinite;
}

/* Particle Overlay */
#game-container::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: radial-gradient(circle, rgba(255, 255, 255, 0.1) 1px, transparent 1px);
    background-size: 50px 50px;
    pointer-events: none;
    animation: particleFloat 30s linear infinite;
    z-index: 2;
}

@keyframes particleFloat {
    0% {
        background-position: 0 0;
        opacity: 0.3;
    }
    50% {
        opacity: 0.1;
    }
    100% {
        background-position: 100px 100px;
        opacity: 0.3;
    }
}

/* Neon Glow on Hover */
.neon-btn::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 0, 255, 0.5);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
}

.neon-btn:hover::before {
    width: 300px;
    height: 300px;
}

.neon-btn span {
    position: relative;
    z-index: 1;
}

/* Power Activation Flash */
@keyframes powerFlash {
    0%, 100% {
        box-shadow: 0 0 10px currentColor;
        transform: scale(1);
    }
    50% {
        box-shadow: 0 0 30px currentColor, 0 0 60px currentColor;
        transform: scale(1.1);
    }
}

.power-slot.active {
    animation: powerFlash 1s ease-in-out infinite;
}

/* Chromatic Aberration on Title */
@keyframes chromatic {
    0% {
        text-shadow: 
            -2px 0 0 #ff0000,
            2px 0 0 #00ffff;
    }
    50% {
        text-shadow: 
            2px 0 0 #ff0000,
            -2px 0 0 #00ffff,
            0 2px 0 #00ff00;
    }
    100% {
        text-shadow: 
            -2px 0 0 #ff0000,
            2px 0 0 #00ffff;
    }
}

.glitch::before,
.glitch::after {
    content: attr(data-text);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    animation: chromatic 3s infinite;
}

/* Vignette Effect */
#game-canvas-container::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    box-shadow: inset 0 0 200px rgba(0, 0, 0, 0.5);
    pointer-events: none;
    z-index: 50;
}

/* Enlightenment Aura */
@keyframes auraGlow {
    0%, 100% {
        box-shadow: 
            inset 0 0 20px rgba(0, 255, 255, 0.3),
            0 0 20px rgba(0, 255, 255, 0.2);
    }
    50% {
        box-shadow: 
            inset 0 0 40px rgba(0, 255, 255, 0.5),
            0 0 40px rgba(0, 255, 255, 0.4);
    }
}

#enlightenment-bar.high-enlightenment {
    animation: auraGlow 2s ease-in-out infinite;
}

/* Fear Pulsing */
@keyframes fearPulse {
    0%, 100% {
        box-shadow: 
            inset 0 0 20px rgba(255, 0, 102, 0.5);
    }
    50% {
        box-shadow: 
            inset 0 0 40px rgba(255, 0, 102, 0.8);
    }
}

#fear-bar {
    animation: fearPulse 1s ease-in-out infinite;
}

/* Transition Effects */
.screen {
    transition: opacity 1s ease-in-out, filter 1s ease-in-out;
}

.screen.active {
    opacity: 1;
    filter: blur(0);
}

.screen:not(.active) {
    opacity: 0;
    filter: blur(10px);
}

/* Mobile Responsiveness with Extra Polish */
@media (max-width: 768px) {
    #game-canvas-container {
        transform: scale(0.8);
        transform-origin: top center;
    }
    
    .power-slot {
        font-size: 0.7rem;
    }
    
    #dialogue-box {
        width: 95%;
        font-size: 0.8rem;
    }
}

/* High Contrast Mode for Accessibility */
@media (prefers-contrast: high) {
    .bar, .power-slot, #dialogue-box {
        border-width: 3px;
    }
    
    .glitch, .subtitle, .tagline {
        text-shadow: 
            0 0 2px #000,
            0 0 5px currentColor;
    }
}

/* Reduced Motion for Accessibility */
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

